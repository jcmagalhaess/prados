(()=>{"use strict";var e,t={201:()=>{const e=window.wc.productEditor,t=window.React,o=window.wp.element,a=window.wp.data,r=window.wp.i18n;function l(){return[{label:(0,r.__)("Flat Fee","woocommerce-product-addons"),value:"flat_fee"},{label:(0,r.__)("Quantity based","woocommerce-product-addons"),value:"quantity_based"},{label:(0,r.__)("Percentage based","woocommerce-product-addons"),value:"percentage_based"}]}function n(){return parseInt((new Date).getTime()/1e3,10)}function c(e){if(!e.name)return[i("title","Title is required.")];if(e.name&&e.name.length>255)return[i("title","Title must not exceed 255 characters.")];if(e.type&&!["multiple_choice","checkbox","custom_text","custom_textarea","file_upload","custom_price","input_multiplier","heading","datepicker"].includes(e.type))return[i("type","Invalid value for the type field.")];if(e.required&&!0!==e.required&&!1!==e.required&&1!==e.required&&0!==e.required)return[i("required","Invalid value for the required field.")];if(e.title_format&&"label"!==e.title_format&&"heading"!==e.title_format&&"hide"!==e.title_format)return[i("title_format","Invalid value for the title_format field.")];if(e.description_enable&&!0!==e.description_enable&&!1!==e.description_enable&&1!==e.description_enable&&0!==e.description_enable)return[i("description_enable","Invalid value for the description_enable field.")];if(e.position&&(!Number.isInteger(e.position)||e.position<0))return[i("position","Invalid value for the position field.")];const t=[];switch(e.type){case"file_upload":case"datepicker":if(e.adjust_price&&!0!==e.adjust_price&&!1!==e.adjust_price&&1!==e.adjust_price&&0!==e.adjust_price)return[i("adjust_price","Invalid value for the adjust_price field.")];if(e.price_type&&"flat_fee"!==e.price_type&&"quantity_based"!==e.price_type&&"percentage_based"!==e.price_type)return[i("price_type","Invalid value for the price_type field.")];if(e.price&&isNaN(parseFloat(e.price)))return[i("price","Invalid value for the price field.")];break;case"custom_price":if(e.restrictions&&!0!==e.restrictions&&!1!==e.restrictions&&1!==e.restrictions&&0!==e.restrictions)return[i("restrictions","Invalid value for the restrictions field.")];if(e.min&&"number"!=typeof e.min)return[i("min","Invalid value for the min field.")];if(e.max&&"number"!=typeof e.max)return[i("max","Invalid value for the max field.")];if(e.min&&e.max&&Math.abs(e.min)>Math.abs(e.max))return[i("max_price","The Maximum price should be higher than the Minimum price.")];break;case"input_multiplier":if(e.restrictions&&!0!==e.restrictions&&!1!==e.restrictions&&1!==e.restrictions&&0!==e.restrictions)return[i("restrictions","Invalid value for the restrictions field.")];if(e.adjust_price&&!0!==e.adjust_price&&!1!==e.adjust_price&&1!==e.adjust_price&&0!==e.adjust_price)return[i("adjust_price","Invalid value for the adjust_price field.")];if(e.price_type&&"flat_fee"!==e.price_type&&"quantity_based"!==e.price_type&&"percentage_based"!==e.price_type)return[i("price_type","Invalid value for the price_type field.")];if(e.price&&isNaN(parseFloat(e.price)))return[i("price","Invalid value for the price field.")];if(e.min&&"number"!=typeof e.min)return[i("min","Invalid value for the min field.")];if(e.max&&"number"!=typeof e.max)return[i("max","Invalid value for the max field.")];if(e.min&&e.max&&Math.abs(e.min)>Math.abs(e.max))return[i("max_qty","The Maximum quantity should be higher than the Minimum quantity.")];break;case"custom_text":case"custom_textarea":if(e.restrictions&&!0!==e.restrictions&&!1!==e.restrictions&&1!==e.restrictions&&0!==e.restrictions)return[i("restrictions","Invalid value for the restrictions field.")];if(e.restrictions_type&&"any_text"!==e.restrictions_type&&"only_letters"!==e.restrictions_type&&"only_numbers"!==e.restrictions_type&&"only_letters_numbers"!==e.restrictions_type&&"email"!==e.restrictions_type)return[i("restrictions_type","Invalid value for the restrictions_type field.")];if(e.placeholder_enable&&!0!==e.placeholder_enable&&!1!==e.placeholder_enable&&1!==e.placeholder_enable&&0!==e.placeholder_enable)return[i("placeholder_enable","Invalid value for the placeholder_enable field.")];if(e.adjust_price&&!0!==e.adjust_price&&!1!==e.adjust_price&&1!==e.adjust_price&&0!==e.adjust_price)return[i("adjust_price","Invalid value for the adjust_price field.")];if(e.price_type&&"flat_fee"!==e.price_type&&"quantity_based"!==e.price_type&&"percentage_based"!==e.price_type)return[i("price_type","Invalid value for the price_type field.")];if(e.price&&isNaN(parseFloat(e.price)))return[i("price","Invalid value for the price field.")];if(e.min&&"number"!=typeof e.min)return[i("min","Invalid value for the min field.")];if(e.max&&"number"!=typeof e.max)return[i("max","Invalid value for the max field.")];if(e.min&&e.max&&Math.abs(e.min)>Math.abs(e.max))return[i("max_length","The Maximum character length should be higher than the Minimum character length.")];break;case"checkbox":return e.options&&e.options.forEach(((e,o)=>{e.label||t.push(i("option_title_"+o,"Option title is required.")),e.price_type&&"flat_fee"!==e.price_type&&"quantity_based"!==e.price_type&&"percentage_based"!==e.price_type&&t.push(i("option_price_type_"+o,"Option price type is invalid.")),e.price&&isNaN(parseFloat(e.price))&&t.push(i("option_price_"+o,"Option price is invalid."))})),t;case"multiple_choice":return e.display&&"select"!==e.display&&"radiobutton"!==e.display&&"images"!==e.display?[i("display","Invalid value for the display field.")]:(e.options&&e.options.forEach(((e,o)=>{e.label||t.push(i("option_title_"+o,"Option title is required.")),e.price_type&&"flat_fee"!==e.price_type&&"quantity_based"!==e.price_type&&"percentage_based"!==e.price_type&&t.push(i("option_price_type_"+o,"Option price type is invalid.")),e.price&&isNaN(parseFloat(e.price))&&t.push(i("option_price_"+o,"Option price is invalid."))})),t)}return[]}function i(e,t){return{field:e,message:t}}const d=window.wp.components,m=window.wp.primitives,s=(0,t.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(m.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),_=(0,o.forwardRef)((function({icon:e,size:t=24,...a},r){return(0,o.cloneElement)(e,{width:t,height:t,...a,ref:r})})),p=(0,t.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(m.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),u=(0,t.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(m.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),f=(0,t.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(m.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),h=(0,t.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(m.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),w=window.wc.components;function E(e){const t={multiple_choice:(0,r.__)("Multiple choice","woocommerce-product-addons"),checkbox:(0,r.__)("Checkboxes","woocommerce-product-addons"),custom_text:(0,r.__)("Short text","woocommerce-product-addons"),custom_textarea:(0,r.__)("Long text","woocommerce-product-addons"),file_upload:(0,r.__)("File upload","woocommerce-product-addons"),custom_price:(0,r.__)("Customer-defined price","woocommerce-product-addons"),input_multiplier:(0,r.__)("Quantity","woocommerce-product-addons"),heading:(0,r.__)("Heading","woocommerce-product-addons"),datepicker:(0,r.__)("Date picker","woocommerce-product-addons")};return e in t?t[e]:(0,r.__)("N/A","woocommerce-product-addons")}function g({description:e,setDescription:a}){const[l,n]=(0,o.useState)(e),[c,i]=(0,o.useState)(!!l);return(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Include description","woocommerce-product-addons"),checked:c,onChange:e=>{i(e),c||a("")}})),c&&(0,t.createElement)(d.TextareaControl,{name:"description",label:(0,r.__)("Description","woocommerce-product-addons"),placeholder:(0,r.__)("Add a description","woocommerce-product-addons"),value:l,onChange:e=>{n(e),a(e)}}))}function v(){return[{label:(0,r.__)("Label","woocommerce-product-addons"),value:"label"},{label:(0,r.__)("Heading","woocommerce-product-addons"),value:"heading"},{label:(0,r.__)("Hide","woocommerce-product-addons"),value:"hide"}]}const y=(0,t.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),b=window.wp.mediaUtils,C=["image"],x=({allowedMediaTypes:e=C,buttonText:o,label:a,icon:r,maxUploadFileSize:l=1e7,MediaUploadComponent:n=b.MediaUpload,multipleSelect:c=!1,value:i,onError:m=(()=>null),onFileUploadChange:s=(()=>null),onMediaGalleryOpen:_=(()=>null),onUpload:p=(()=>null),onSelect:u=(()=>null),uploadMedia:f=b.uploadMedia,additionalData:h})=>{const w=Boolean(c);return(0,t.createElement)(d.FormFileUpload,{accept:e.toString(),multiple:w,onChange:({currentTarget:t})=>{f({allowedTypes:e,filesList:t.files,maxUploadFileSize:l,onError:m,onFileChange(e){s(w?e:e[0])},additionalData:h})},render:({openFileDialog:l})=>(0,t.createElement)("div",{className:"woocommerce-form-file-upload",onKeyPress:()=>{},tabIndex:0,role:"button"},(0,t.createElement)("div",{className:"woocommerce-media-uploader"},a&&(0,t.createElement)("div",{className:"woocommerce-media-uploader__label"},a),(0,t.createElement)(n,{value:i,onSelect:u,allowedTypes:e,multiple:c,render:({open:e})=>o?(0,t.createElement)(d.Button,{isTertiary:!0,icon:r,onClick:()=>{_(),e()}},o):(0,t.createElement)(d.Button,{isTertiary:!0,icon:r,onClick:()=>{_(),e()}})})))})};function N({index:o,option:n,isFirst:c,isLast:i,handleMove:m,setOption:_,deleteOption:p,hasFieldError:u,handleFieldBlur:f,display:w=""}){const E=c&&i,g=(0,a.useSelect)((e=>e("core").getEntityRecord("postType","attachment",n.image))),v=e=>{Array.isArray(e)?_(o,"image",e[0].id):_(o,"image",e.id)},b=(0,e.__experimentalUseCurrencyInputProps)({value:n.price,onChange:e=>{_(o,"price",e)}});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field-grid-columns-5"},(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-1"},!E&&(0,t.createElement)(d.DropdownMenu,{icon:s,label:"Select an action"},(({onClose:e})=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(d.MenuGroup,null,g&&(0,t.createElement)(d.MenuItem,{onClick:()=>{_(o,"image",""),e()},className:"wc-pao-list__list-item__action-remove-image"},(0,r.__)("Remove image","woocommerce-product-addons")),!c&&(0,t.createElement)(d.MenuItem,{onClick:()=>{m(o,"UP"),e()},className:"wc-pao-list__list-item__action-move-up"},(0,r.__)("Move up","woocommerce-product-addons")),!i&&(0,t.createElement)(d.MenuItem,{onClick:()=>{m(o,"DOWN"),e()},className:"wc-pao-list__list-item__action-move-down"},(0,r.__)("Move down","woocommerce-product-addons"))),(0,t.createElement)(d.MenuGroup,null,(0,t.createElement)(d.MenuItem,{isDestructive:!0,onClick:()=>{p(o),e()},className:"wc-pao-list__list-item__action-delete"},(0,r.__)("Delete","woocommerce-product-addons"))))))),"images"===w&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-2 image"},g&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("img",{className:"wc-pao-form__field-image",alt:g.alt_text,src:g.source_url}),(0,t.createElement)("span",{className:"wc-pao-form__field-image-remove"},(0,t.createElement)(d.Button,{icon:h,"aria-label":(0,r.__)("Remove image","woocommerce-product-addons"),isTertiary:!0,onClick:()=>_(o,"image","")}))),!g&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(x,{icon:y,onUpload:v,onFileUploadChange:v,onSelect:v}))),(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-2"},(0,t.createElement)(e.__experimentalTextControl,{label:"",className:u("option_title_"+o)?"hasError":"",name:"option_title_"+o,placeholder:(0,r.__)("Option title","woocommerce-product-addons"),value:n.label,onChange:e=>{_(o,"label",e)},onBlur:()=>{f("option_title_"+o)}}))),"images"!==w&&(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-2 full"},(0,t.createElement)(e.__experimentalTextControl,{label:"",className:u("option_title_"+o)?"hasError":"",name:"option_title_"+o,placeholder:(0,r.__)("Option title","woocommerce-product-addons"),value:n.label,onChange:e=>{_(o,"label",e)},onBlur:()=>{f("option_title_"+o)}})),(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-3"},(0,t.createElement)(d.SelectControl,{label:"",value:n.price_type,options:l(),onChange:e=>{_(o,"price_type",e)}})),(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-4"},"percentage_based"!==n.price_type&&(0,t.createElement)(e.__experimentalTextControl,{...b,placeholder:0}),"percentage_based"===n.price_type&&(0,t.createElement)(e.__experimentalTextControl,{...b,placeholder:0,prefix:"%"})),!E&&(0,t.createElement)("div",{className:"wc-pao-form__field-grid-column-5-5"},(0,t.createElement)(d.Button,{icon:h,onClick:()=>p(o),"aria-label":(0,r.__)("Remove add-on","woocommerce-product-addons")})))))}function T({addonOptions:o,setAddonOptions:a,hasFieldError:n,handleFieldBlur:c,display:i}){const m=(e,t="UP")=>{const r=o.slice();"UP"===t&&e>0?[r[e-1],r[e]]=[r[e],r[e-1]]:"DOWN"===t&&e<r.length-1&&([r[e],r[e+1]]=[r[e+1],r[e]]),a(r)},s=(e,t,r)=>{["label","price_type","price","image"].includes(t)&&a(o.map(((o,a)=>a===e?{...o,[t]:r}:o)))},_=e=>{const t=o.slice();a(t.filter(((t,o)=>o!==e)))},p=o&&o.length?o.map(((e,a)=>(0,t.createElement)(N,{key:a,index:a,option:e,setOption:s,isFirst:0===a,isLast:a===o.length-1,deleteOption:_,handleMove:m,hasFieldError:n,handleFieldBlur:c,display:i}))):null;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field-grid-headers-3"},(0,t.createElement)("div",{className:"wc-pao-form__field-grid-header-3-1"},(0,t.createElement)(e.__experimentalLabel,{label:(0,r.__)("Option title","woocommerce-product-addons"),required:!0})),(0,t.createElement)("div",{className:"wc-pao-form__field-grid-header-3-2"},(0,t.createElement)(e.__experimentalLabel,{label:(0,r.__)("Price type","woocommerce-product-addons"),tooltip:(0,r.__)("Apply a flat fee, charge per quantity ordered or charge a percentage of the total price.","woocommerce-product-addons")})),(0,t.createElement)("div",{className:"wc-pao-form__field-grid-header-3-3"},(0,t.createElement)(e.__experimentalLabel,{label:(0,r.__)("Price","woocommerce-product-addons")})))),(0,t.createElement)("div",{className:"wc-pao-form__field-options"},p),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(d.Button,{onClick:()=>(()=>{const e={label:"",price_type:l()[0].value,price:0,image:""};o&&a([...o,e])})(),"aria-label":(0,r.__)("Add option","woocommerce-product-addons"),text:(0,r.__)("+ Add option","woocommerce-product-addons"),isTertiary:!0})))}function M({addon:o,fieldValidationProps:a,hasFieldError:l,handleFieldBlur:n,onPropertyChange:c}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>c("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>c("title_format",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Display as","woocommerce-product-addons"),value:o.display,options:[{label:(0,r.__)("Dropdown","woocommerce-product-addons"),value:"select"},{label:(0,r.__)("Radio buttons","woocommerce-product-addons"),value:"radiobutton"},{label:(0,r.__)("Images","woocommerce-product-addons"),value:"images"}],onChange:e=>c("display",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require selection","woocommerce-product-addons"),checked:o.required,onChange:e=>c("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>c("description",e)}),(0,t.createElement)(T,{addonOptions:o.options,setAddonOptions:e=>c("options",e),hasFieldError:l,handleFieldBlur:n,display:o.display}))}function P({addon:o,fieldValidationProps:a,hasFieldError:l,handleFieldBlur:n,onPropertyChange:c}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>c("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>c("title_format",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require selection","woocommerce-product-addons"),checked:o.required,onChange:e=>c("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>c("description",e)}),(0,t.createElement)(T,{addonOptions:o.options,setAddonOptions:e=>c("options",e),hasFieldError:l,handleFieldBlur:n,display:""}))}function k(e){switch(e){case"flat_fee":default:return(0,r.__)("The add-on price will apply only once, regardless of the product quantity ordered.","woocommerce-product-addons");case"quantity_based":return(0,r.__)("The add-on price will be multiplied by the product quantity.","woocommerce-product-addons");case"percentage_based":return(0,r.__)("The add-on price will be calculated as a percentage of the total product price.","woocommerce-product-addons")}}function I({priceType:a,setPriceType:n,price:c,setPrice:i}){const[m,s]=(0,o.useState)(c),[_,p]=(0,o.useState)(!!m),u=(0,e.__experimentalUseCurrencyInputProps)({value:m,onChange:e=>{s(e),i(e)}});return(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Adjust price","woocommerce-product-addons"),checked:_,onChange:e=>{p(e),_||i("")}})),_&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Price type","woocommerce-product-addons"),value:a,options:l(),onChange:e=>{n(e)},help:k(a)})),"percentage_based"!==a&&(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...u,label:(0,r.__)("Price","woocommerce-product-addons"),placeholder:0})),"percentage_based"===a&&(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...u,label:(0,r.__)("Price","woocommerce-product-addons"),prefix:"%",placeholder:0})))))}function F(){return[{label:(0,r.__)("Any text","woocommerce-product-addons"),value:"any_text"},{label:(0,r.__)("Only Letters","woocommerce-product-addons"),value:"only_letters"},{label:(0,r.__)("Only Numbers","woocommerce-product-addons"),value:"only_numbers"},{label:(0,r.__)("Only Letters and Numbers","woocommerce-product-addons"),value:"only_letters_numbers"},{label:(0,r.__)("Only Email Address","woocommerce-product-addons"),value:"email"}]}function S({placeholder:e,setPlaceholder:a}){const[l,n]=(0,o.useState)(e),[c,i]=(0,o.useState)(!!l);return(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Include placeholder","woocommerce-product-addons"),checked:c,onChange:e=>{i(e),c||a("")}})),c&&(0,t.createElement)(d.TextControl,{name:"placeholder",label:(0,r.__)("Placeholder","woocommerce-product-addons"),placeholder:(0,r.__)("Add a placeholder","woocommerce-product-addons"),value:l,onChange:n,onChange:e=>{n(e),a(e)}}))}function q({min:a,setMin:l,max:n,setMax:c,fieldValidationProps:i}){const[m,s]=(0,o.useState)(a),[_,p]=(0,o.useState)(n),[u,f]=(0,o.useState)(!!m||!!_),h=i("min_length"),w=i("max_length");return(0,o.useEffect)((()=>{l(m)}),[m]),(0,o.useEffect)((()=>{c(_)}),[_]),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Limit character length","woocommerce-product-addons"),checked:u,onChange:e=>{f(e),u||(l(""),c(""))}})),u&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...h,name:"min_length",label:(0,r.__)("Minimum character length","woocommerce-product-addons"),value:m||"",onChange:s,placeholder:0,onBlur:e=>{if(m){const e=Math.round(Math.abs(m));s(e)}h.onBlur(e),w.onBlur({target:{name:"max_length"}})}})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...w,name:"max_length",label:(0,r.__)("Maximum character length","woocommerce-product-addons"),value:_||"",onChange:p,onBlur:e=>{if(_){const e=Math.round(Math.abs(_));p(e)}w.onBlur(e)},placeholder:(0,r.__)("Unlimited","woocommerce-product-addons")})))))}function B({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Restriction","woocommerce-product-addons"),value:o.restrictions_type,options:F(),onChange:e=>l("restrictions_type",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require input","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(S,{placeholder:o.placeholder,setPlaceholder:e=>l("placeholder",e)}),(0,t.createElement)(q,{min:o.min,setMin:e=>l("min",e),max:o.max,setMax:e=>l("max",e),fieldValidationProps:a}),(0,t.createElement)(I,{priceType:o.price_type,setPriceType:e=>l("price_type",e),price:o.price,setPrice:e=>l("price",e)}))}function A({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Restriction","woocommerce-product-addons"),value:o.restrictions_type,options:F(),onChange:e=>l("restrictions_type",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require input","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(S,{placeholder:o.placeholder,setPlaceholder:e=>l("placeholder",e)}),(0,t.createElement)(q,{min:o.min,setMin:e=>l("min",e),max:o.max,setMax:e=>l("max",e),fieldValidationProps:a}),(0,t.createElement)(I,{priceType:o.price_type,setPriceType:e=>l("price_type",e),price:o.price,setPrice:e=>l("price",e)}))}function O({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require upload","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(I,{priceType:o.price_type,setPriceType:e=>l("price_type",e),price:o.price,setPrice:e=>l("price",e)}))}function D({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require selection","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(I,{priceType:o.price_type,setPriceType:e=>l("price_type",e),price:o.price,setPrice:e=>l("price",e)}))}function V({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}))}function L({min:a,setMin:l,max:n,setMax:c,fieldValidationProps:i}){const[m,s]=(0,o.useState)(a),[_,p]=(0,o.useState)(n),[u,f]=(0,o.useState)(!!m||!!_),h=i("min_price"),w=i("max_price"),E=(0,e.__experimentalUseCurrencyInputProps)({value:""!==m&&0!==m?Math.abs(m):""}),g=(0,e.__experimentalUseCurrencyInputProps)({value:""!==_&&0!==_?Math.abs(_):""});return(0,o.useEffect)((()=>{l(m)}),[m]),(0,o.useEffect)((()=>{c(_)}),[_]),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Limit price","woocommerce-product-addons"),checked:u,onChange:f,onChange:e=>{f(e),u||(l(""),c(""))}})),u&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...E,...h,name:"min_price",label:(0,r.__)("Minimum price","woocommerce-product-addons"),onChange:s,onBlur:e=>{if(m){const e=Math.abs(m);s(e)}h.onBlur(e),w.onBlur({target:{name:"max_price"}})},placeholder:0})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...g,...w,name:"max_price",label:(0,r.__)("Maximum price","woocommerce-product-addons"),onChange:p,onBlur:e=>{if(_){const e=Math.abs(_);p(e)}w.onBlur(e)},placeholder:(0,r.__)("Unlimited","woocommerce-product-addons")})))))}function j({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require input","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(L,{min:o.min,setMin:e=>l("min",e),max:o.max,setMax:e=>l("max",e),fieldValidationProps:a}))}function U({min:a,setMin:l,max:n,setMax:c,fieldValidationProps:i}){const[m,s]=(0,o.useState)(a),[_,p]=(0,o.useState)(n),[u,f]=(0,o.useState)(!!m||!!_),h=i("min_qty"),w=i("max_qty");return(0,o.useEffect)((()=>{l(m)}),[m]),(0,o.useEffect)((()=>{c(_)}),[_]),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Limit quantity","woocommerce-product-addons"),checked:u,onChange:e=>{f(e),u||(l(""),c(""))}})),u&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...h,name:"min_qty",label:(0,r.__)("Minimum quantity","woocommerce-product-addons"),value:m||"",onChange:s,placeholder:0,onBlur:e=>{if(m){const e=Math.round(Math.abs(m));s(e)}h.onBlur(e),w.onBlur({target:{name:"max_qty"}})}})),(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(e.__experimentalTextControl,{...w,name:"max_qty",label:(0,r.__)("Maximum quantity","woocommerce-product-addons"),value:_||"",onChange:p,onBlur:e=>{if(_){const e=Math.round(Math.abs(_));p(e)}w.onBlur(e)},placeholder:(0,r.__)("Unlimited","woocommerce-product-addons")})))))}function R({addon:o,fieldValidationProps:a,onPropertyChange:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)(e.__experimentalTextControl,{...a("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>l("name",e)})),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__row"},(0,t.createElement)("div",{className:"wc-pao-form__field__grid__col-50"},(0,t.createElement)(d.SelectControl,{label:(0,r.__)("Title format","woocommerce-product-addons"),value:o.title_format,options:v(),onChange:e=>l("title_format",e)})))),(0,t.createElement)("div",{className:"wc-pao-form__field"},(0,t.createElement)("div",{style:{marginBottom:"1em"}},(0,t.createElement)(d.ToggleControl,{label:(0,r.__)("Require input","woocommerce-product-addons"),checked:o.required,onChange:e=>l("required",e)}))),(0,t.createElement)(g,{description:o.description,setDescription:e=>l("description",e)}),(0,t.createElement)(U,{min:o.min,setMin:e=>l("min",e),max:o.max,setMax:e=>l("max",e),fieldValidationProps:a}),(0,t.createElement)(I,{priceType:o.price_type,setPriceType:e=>l("price_type",e),price:o.price,setPrice:e=>l("price",e)}))}function z(e){const o={multiple_choice:M,checkbox:P,custom_text:A,custom_textarea:B,file_upload:O,custom_price:j,input_multiplier:R,heading:V,datepicker:D},a=e.addon.type in o?o[e.addon.type]:G;return(0,t.createElement)(a,{...e})}function G({addon:o,setAddon:a,fieldValidationProps:l}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e.__experimentalTextControl,{...l("title"),name:"title",required:!0,label:(0,r.__)("Title","woocommerce-product-addons"),value:o.name,onChange:e=>{const t={...o,name:e};a(t)}}))}const $=(0,o.memo)((({addon:a,setAddon:l,isFirst:n,isLast:i,isOpen:m,toggleAddon:g,handleMove:v,deleteAddon:y})=>{const{hasError:b,hasFieldError:C,getFieldErrorMessage:x,fieldValidationProps:N,handleFieldBlur:T}=function(t){const[a,l]=(0,o.useState)(c(t));(0,o.useEffect)((()=>{l(c(t))}),[t,l]),(0,e.useValidation)(`_product_addons_${t.id}`,(async()=>{if(0!==a.length)return i(a.map((e=>e.field))),(0,r.sprintf)(/* translators: %s: error message */ /* translators: %s: error message */
(0,r.__)("An error occurred while saving add-ons: %s","woocommerce-product-addons"),a[0].message)}),[a]);const[n,i]=(0,o.useState)([]),d=e=>n.includes(e),m=e=>d(e)&&a.length>0&&a.some((t=>t.field===e)),s=e=>d(e)&&a.length?a.filter((t=>t.field===e)).map((e=>e.message))[0]:"",_=e=>{n.includes(e)||i([...n,e])},p=a.length>0&&n.length>0;return{errorState:a,touchedFields:n,setTouchedFields:i,isFieldTouched:d,hasFieldError:m,getFieldErrorMessage:s,handleFieldBlur:_,fieldValidationProps:e=>({error:s(e),hasError:m(e),onBlur:e=>_(e.target.name)}),hasError:p}}(a),M=n&&i,P=m?(0,t.createElement)("div",{className:"wc-pao-list__list-item__form"},(0,t.createElement)(z,{addon:a,setAddon:l,hasFieldError:C,getFieldErrorMessage:x,handleFieldBlur:T,fieldValidationProps:N,onPropertyChange:(e,t)=>{l({...a,[e]:t})}})):null,k=(0,t.createElement)(d.DropdownMenu,{icon:s,label:(0,r.__)("Select an action","woocommerce-product-addons")},(({onClose:e})=>(0,t.createElement)(t.Fragment,null,!M&&(0,t.createElement)(d.MenuGroup,{label:(0,r.sprintf)(/** Translators: Addon ID */ /** Translators: Addon ID */
(0,r.__)("Add-On Id: %s","woocommerce-product-addons"),a?.id)},!n&&(0,t.createElement)(d.MenuItem,{onClick:()=>{v(a.id,"UP"),e()},className:"wc-pao-list__list-item__action-move-up"},(0,r.__)("Move up","woocommerce-product-addons")),!i&&(0,t.createElement)(d.MenuItem,{onClick:()=>{v(a.id,"DOWN"),e()},className:"wc-pao-list__list-item__action-move-down"},(0,r.__)("Move down","woocommerce-product-addons"))),(0,t.createElement)(d.MenuGroup,{label:M?(0,r.sprintf)(/** Translators: Addon ID */ /** Translators: Addon ID */
(0,r.__)("Add-On Id: %s","woocommerce-product-addons"),a?.id):""},(0,t.createElement)(d.MenuItem,{isDestructive:!0,onClick:()=>{y(a.id),e()},className:"wc-pao-list__list-item__action-delete"},(0,r.__)("Delete","woocommerce-product-addons"))))));return(0,t.createElement)("div",{className:"wc-pao-list__list-item-container"},(0,t.createElement)("div",{className:"wc-pao-list__list-item"},k,b&&(0,t.createElement)("div",{className:"wc-pao-list__list-item__error"},(0,t.createElement)(_,{icon:p})),a.name&&(0,t.createElement)("div",{className:"addon-title"},a.name),!a?.name&&(0,t.createElement)("div",{className:"addon-title addon-title--placeholder"},(0,r.__)("Untitled","woocommerce-product-addons")),(0,t.createElement)(w.Tag,{label:E(a.type)}),(0,t.createElement)(d.Button,{style:{marginRight:"1em"},icon:m?u:f,iconPosition:"right",variant:"tertiary",className:"wc-pao-list__list-item__action-edit","aria-label":(0,r.__)("Edit the add-on","woocommerce-product-addons"),onClick:()=>g(a.id)},(0,t.createElement)("span",null,(0,r.__)("Edit","woocommerce-product-addons"))),(0,t.createElement)(d.Button,{icon:h,onClick:()=>y(a.id),"aria-label":(0,r.__)("Remove add-on","woocommerce-product-addons")})),P)}));function H({hasItems:o,handleAddNewItem:a,handleExpandAll:l,handleCollapseAll:n,handleCopy:c,handlePaste:i}){return(0,t.createElement)(e.__experimentalSectionActions,null,(0,t.createElement)(d.Dropdown,{renderToggle:({isOpen:e,onToggle:o})=>(0,t.createElement)(d.Button,{"aria-expanded":e,icon:e?u:f,variant:"secondary",onClick:o,className:"wc-pao-list__action--add"},(0,t.createElement)("span",null,(0,r.__)("Add new","woocommerce-product-addons"))),renderContent:({onClose:e})=>(0,t.createElement)(d.MenuGroup,null,(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Multiple Choice","woocommerce-product-addons"),onClick:()=>{a("multiple_choice"),e()}},(0,r.__)("Multiple Choice","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{onClick:()=>{a("checkbox"),e()}},(0,r.__)("Checkboxes","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Short text","woocommerce-product-addons"),onClick:()=>{a("custom_text"),e()}},(0,r.__)("Short text","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Long text","woocommerce-product-addons"),onClick:()=>{a("custom_textarea"),e()}},(0,r.__)("Long text","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("File upload","woocommerce-product-addons"),onClick:()=>{a("file_upload"),e()}},(0,r.__)("File upload","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Customer-defined price","woocommerce-product-addons"),onClick:()=>{a("custom_price"),e()}},(0,r.__)("Customer-defined price","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Quantity","woocommerce-product-addons"),onClick:()=>{a("input_multiplier"),e()}},(0,r.__)("Quantity","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Heading","woocommerce-product-addons"),onClick:()=>{a("heading"),e()}},(0,r.__)("Heading","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Date Picker","woocommerce-product-addons"),onClick:()=>{a("datepicker"),e()}},(0,r.__)("Date Picker","woocommerce-product-addons")))}),(0,t.createElement)(d.DropdownMenu,{icon:s,label:(0,r.__)("Select an action","woocommerce-product-addons")},(({onClose:e})=>(0,t.createElement)(t.Fragment,null,o&&(0,t.createElement)(d.MenuGroup,null,(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Expand all","woocommerce-product-addons"),onClick:()=>{l(),e()},className:"woocommerce-product-addons__actions--expand"},(0,r.__)("Expand all","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Collapse all","woocommerce-product-addons"),onClick:()=>{n(),e()},className:"woocommerce-product-addons__actions--collapse"},(0,r.__)("Collapse all","woocommerce-product-addons"))),(0,t.createElement)(d.MenuGroup,null,o&&(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Copy add-ons","woocommerce-product-addons"),onClick:()=>{c(),e()},className:"woocommerce-product-addons__actions--copy"},(0,r.__)("Copy add-ons","woocommerce-product-addons")),(0,t.createElement)(d.MenuItem,{label:(0,r.__)("Paste add-ons","woocommerce-product-addons"),onClick:t=>{i(t),e()},className:"woocommerce-product-addons__actions--paste"},(0,r.__)("Paste add-ons","woocommerce-product-addons")))))))}function W(){return(0,t.createElement)("div",{className:"wc-pao-list__empty-state"},(0,t.createElement)("div",{className:"wc-pao-list__empty-state__row"},(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"}))),(0,t.createElement)("div",{className:"wc-pao-list__empty-state__row"},(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"}))),(0,t.createElement)("div",{className:"wc-pao-list__empty-state__row"},(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"})),(0,t.createElement)("div",null,(0,t.createElement)("div",{className:"wc-pao-list__empty-state__field"}))))}function Q(){const{addons:i,hasAddons:d,openAddons:m,handleToggle:s,handleMove:_,handleExpandAll:p,handleCollapseAll:u,handleAddNewItem:f,handleEditSingleItem:h,handleDeleteSingleItem:w,handleCopy:E,handlePaste:g}=function(){const[t,i]=(0,e.__experimentalUseProductEntityProp)("_product_addons"),d=Array.isArray(t)?[...t]:[],[m,s]=(0,o.useState)(d),[_,p]=(0,o.useState)([]),[u,f]=(0,e.__experimentalUseProductEntityProp)("id"),h=(0,a.useSelect)((e=>{const{getEntityRecordEdits:t}=e("core");return t("postType","product",u)}),[u]),w=(0,o.useCallback)((e=>{p((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[p]),E=(0,o.useCallback)((e=>{s((t=>t.map((t=>t.id!==e?.id?t:e))))}),[]),g=(0,o.useCallback)((e=>{s((t=>t.filter((t=>t.id!==e))))}),[]),v=(0,o.useCallback)((e=>{const t=n(),o=function(e,t){const o={id:t,name:"",type:e,options:[]},a={label:"",price_type:l()[0].value,price:0,image:""};switch(e){case"checkbox":case"multiple_choice":return o.options.push(a),{...o};default:return{...o}}}(e,t);s((e=>[...e,o])),w(t)}),[]),y=(0,o.useCallback)(((e,t="UP")=>{s((o=>{const a=o.findIndex((t=>t.id===e));if(-1===a)return o;const r=o.slice();return"UP"===t&&a>0?[r[a-1],r[a]]=[r[a],r[a-1]]:"DOWN"===t&&a<r.length-1&&([r[a],r[a+1]]=[r[a+1],r[a]]),r}))}),[]),b=(0,o.useCallback)((()=>{if(h.hasOwnProperty("_product_addons")){const{createWarningNotice:e}=(0,a.dispatch)("core/notices");e((0,r.__)("Please save the product before copying add-ons.","woocommerce-product-addons"))}else{const e=document.createElement("textarea");e.value=JSON.stringify(m),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);const t=(0,r.sprintf)(
// translators: placeholder %1$s: the number of exported add-ons.
// translators: placeholder %1$s: the number of exported add-ons.
(0,r._n)("%1$s add-on was successfully copied to your clipboard.","%1$s add-ons were successfully copied to your clipboard.",m.length,"woocommerce-product-addons"),m.length),{createSuccessNotice:o}=(0,a.dispatch)("core/notices");o(t,{icon:"🎉"})}}),[m,h]),C=(0,o.useCallback)((e=>{e.preventDefault();const t=window.prompt((0,r.__)("Use this field to paste the add-ons you previously copied.","woocommerce-product-addons"));if(!t)return;const o=function(e){const t={addonsToPaste:[],notice:""};try{const o=JSON.parse(e.trim());if(!Array.isArray(o)||!o.length)return t.notice=(0,r.__)("Could not paste add-ons. Please review the string you pasted and try again.","woocommerce-product-addons"),t;for(let e=0;e<o.length;e++){const a=c(o[e]);if(a.length){t.notice=(0,r.sprintf)((0,r.__)("Could not paste add-ons. In addon #%1$s, the following error occurred: %2$s","woocommerce-product-addons"),e+1,a[0].message);break}}return t.notice||(t.addonsToPaste=o.map(((e,t)=>(e.id=parseInt(n()+t,10),e)))),t}catch(e){return t.notice=(0,r.__)("Could not paste add-ons. Please review the string you pasted and try again.","woocommerce-product-addons"),t}}(t);if(o.addonsToPaste.length){s((e=>[...e,...o.addonsToPaste]));const{createSuccessNotice:e}=(0,a.dispatch)("core/notices");e((0,r.sprintf)(
// translators: %1$s: the number of imported add-ons.
// translators: %1$s: the number of imported add-ons.
(0,r._n)("%1$s addon was successfully pasted.","%1$s addons were successfully pasted.",o.addonsToPaste.length,"woocommerce-product-addons"),o.addonsToPaste.length),{icon:"🎉"})}else{const{createWarningNotice:e}=(0,a.dispatch)("core/notices");e(o.notice)}}),[]);return(0,o.useEffect)((()=>{i([...m])}),[m]),{addons:m,setAddons:s,hasAddons:m.length>0,openAddons:_,handleToggle:w,handleExpandAll:()=>p(m.map((e=>e.id))),handleCollapseAll:()=>p([]),handleMove:y,handleAddNewItem:v,handleEditSingleItem:E,handleDeleteSingleItem:g,handleCopy:b,handlePaste:C}}(),v=i&&i.length?i.map(((e,o)=>(0,t.createElement)($,{key:e.id,addon:e,setAddon:h,isFirst:0===o,isLast:o===i.length-1,isOpen:m.includes(e.id),toggleAddon:s,deleteAddon:w,handleMove:_}))):null,y=i&&0!==i.length?null:(0,t.createElement)(W,null),b=(0,o.useRef)(null),C=(0,o.useRef)(i.length);return(0,o.useEffect)((()=>{b.current&&C.current<i.length&&b.current.scrollIntoView({behavior:"smooth",block:"end"}),C.current=i.length}),[i.length]),(0,t.createElement)(o.Fragment,null,(0,t.createElement)(H,{hasItems:d,handleAddNewItem:f,handleExpandAll:p,handleCollapseAll:u,handleCopy:E,handlePaste:g}),y,(0,t.createElement)("div",{ref:b,className:"wc-pao-list"},v))}const J=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"woocommerce-product-addons/product-addons","version":"0.1.0","title":"PAO Addons List","category":"widgets","icon":"flag","description":"Show add-ons.","attributes":{"__editorContent":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false},"textdomain":"woocommerce-product-addons","editorScript":"file:./index.js","editorStyle":"file:./style-index.css","usesContext":["postType"]}'),{name:K,...X}=J,Y={edit:function(){return(0,t.createElement)(Q,null)}};(0,e.registerProductEditorBlockType)({name:K,metadata:X,settings:Y})}},o={};function a(e){var r=o[e];if(void 0!==r)return r.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,o,r,l)=>{if(!o){var n=1/0;for(m=0;m<e.length;m++){for(var[o,r,l]=e[m],c=!0,i=0;i<o.length;i++)(!1&l||n>=l)&&Object.keys(a.O).every((e=>a.O[e](o[i])))?o.splice(i--,1):(c=!1,l<n&&(n=l));if(c){e.splice(m--,1);var d=r();void 0!==d&&(t=d)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[o,r,l]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={448:0,744:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var r,l,[n,c,i]=o,d=0;if(n.some((t=>0!==e[t]))){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(i)var m=i(a)}for(t&&t(o);d<n.length;d++)l=n[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(m)},o=globalThis.webpackChunkwoocommerce_product_addons=globalThis.webpackChunkwoocommerce_product_addons||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=a.O(void 0,[744],(()=>a(201)));r=a.O(r)})();